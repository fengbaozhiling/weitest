$(function(){var e="[object Opera]"==Object.prototype.toString.call(window.opera),a=[["size","px"],["minversion",""],["quiet","modules"],["radius","%"],["fontsize","%"],["imagesize","%"]],o=function(){for(var e in a){var o=a[e],n=$('label[for="'+o[0]+'"]');n.text(n.text().replace(/:.*/,": "+$("#"+o[0]).val()+o[1]))}},n=function(){var e={render:$("#render").val(),ecLevel:$("#eclevel").val(),minVersion:parseInt($("#minversion").val(),10),color:$("#color").val(),bgColor:$("#bg-color").val(),text:$("#text").val(),size:parseInt($("#size").val(),10),radius:.01*parseInt($("#radius").val(),10),quiet:parseInt($("#quiet").val(),10),mode:parseInt($("#mode").val(),10),label:$("#label").val(),labelsize:.01*parseInt($("#fontsize").val(),10),fontname:$("#font").val(),fontcolor:$("#fontcolor").val(),image:$("#img-buffer")[0],imagesize:.01*parseInt($("#imagesize").val(),10)};$("#container").empty().qrcode(e)},t=function(){o(),n()},i=function(){var e=$("#image")[0];if(e.files&&e.files[0]){var a=new FileReader;a.onload=function(e){$("#img-buffer").attr("src",e.target.result),$("#mode").val("4"),setTimeout(t,250)},a.readAsDataURL(e.files[0])}},l=function(e){var a=$("#container canvas")[0].toDataURL("image/png");console.log(a),$("#download").attr("href",a)};$(function(){e&&($("html").addClass("opera"),$("#radius").prop("disabled",!0)),$("#download").on("click",l),$("#image").on("change",i),$("input, textarea, select").on("input change",t),$(window).load(t),t()})});