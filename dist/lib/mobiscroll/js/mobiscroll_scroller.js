!function(e){function t(e){if("touchstart"===e.type)d=!0;else if(d)return d=!1,!1;return!0}function n(){l=!0,setTimeout(function(){l=!1},300)}function i(e,t,n){return Math.max(t,Math.min(e,n))}function a(t){var n={values:[],keys:[]};return e.each(t,function(e,t){n.keys.push(e),n.values.push(t)}),n}e.mobiscroll.classes.Scroller=function(d,w){function T(e,t,n){if(e.stopPropagation(),e.preventDefault(),!ee&&!k(t)&&!t.hasClass("dwa")){ee=!0;var i=t.find(".dw-ul");W(i),clearInterval(he),he=setInterval(function(){n(i)},ke.delay),n(i)}}function k(t){if(e.isArray(ke.readonly)){var n=e(".dwwl",_).index(t);return ke.readonly[n]}return ke.readonly}function M(t){var n='<div class="dw-bf">',i=Oe[t],o=i.values?i:a(i),s=1,l=o.labels||[],d=o.values,c=o.keys||d;return e.each(d,function(e,t){s%20==0&&(n+='</div><div class="dw-bf">'),n+='<div role="option" aria-selected="false" class="dw-li dw-v" data-val="'+c[e]+'"'+(l[e]?' aria-label="'+l[e]+'"':"")+' style="height:'+z+"px;line-height:"+z+'px;"><div class="dw-i">'+t+"</div></div>",s++}),n+="</div>"}function W(t){de=e(".dw-li",t).index(e(".dw-v",t).eq(0)),ce=e(".dw-li",t).index(e(".dw-v",t).eq(-1)),we=e(".dw-ul",_).index(t)}function D(e){var t=ke.headerText;return t?"function"==typeof t?t.call(Ce,e):t.replace(/\{value\}/i,e):""}function A(){ge.temp=ge.values?ge.values.slice(0):ke.parseValue(Te.val()||"",ge),R()}function O(t){var n,i,a=window.getComputedStyle?getComputedStyle(t[0]):t[0].style;return v?(e.each(["t","webkitT","MozT","OT","msT"],function(e,t){return void 0!==a[t+"ransform"]?(n=a[t+"ransform"],!1):void 0}),n=n.split(")")[0].split(", "),i=n[13]||n[5]):i=a.top.replace("px",""),Math.round(Y-i/z)}function V(e,t){clearTimeout(We[t]),delete We[t],e.closest(".dwwl").removeClass("dwa")}function S(e,t,n,i,a){var o=(Y-n)*z,s=e[0].style;o==Ae[t]&&We[t]||(i&&o!=Ae[t]&&q("onAnimStart",[_,t,i]),Ae[t]=o,s[f+"Transition"]="all "+(i?i.toFixed(3):0)+"s ease-out",v?s[f+"Transform"]="translate3d(0,"+o+"px,0)":s.top=o+"px",We[t]&&V(e,t),i&&a&&(e.closest(".dwwl").addClass("dwa"),We[t]=setTimeout(function(){V(e,t)},1e3*i)),De[t]=n)}function H(t,n,i){var a=e('.dw-li[data-val="'+t+'"]',n),o=e(".dw-li",n),s=o.index(a),l=o.length;if(!a.hasClass("dw-v")){for(var d=a,c=a,r=0,u=0;s-r>=0&&!d.hasClass("dw-v");)r++,d=o.eq(s-r);for(;l>s+u&&!c.hasClass("dw-v");)u++,c=o.eq(s+u);(r>u&&u&&2!==i||!r||0>s-r||1==i)&&c.hasClass("dw-v")?(a=c,s+=u):(a=d,s-=r)}return{cell:a,v:s,val:a.attr("data-val")}}function L(t,n,i,a,o){q("validate",[_,n,t,a])!==!1&&(e(".dw-ul",_).each(function(i){var s=e(this),l=i==n||void 0===n,d=H(ge.temp[i],s,a),c=d.cell;(!c.hasClass("dw-sel")||l)&&(ge.temp[i]=d.val,ke.multiple||(e(".dw-sel",s).removeAttr("aria-selected"),c.attr("aria-selected","true")),e(".dw-sel",s).removeClass("dw-sel"),c.addClass("dw-sel"),S(s,i,d.v,l?t:.1,l?o:!1))}),F=ke.formatResult(ge.temp),ge.live&&R(i,0,!0),e(".dwv",_).html(D(F)),i&&q("onChange",[F]))}function q(t,n){var i;return n.push(ge),e.each([N,Me,w],function(e,a){a&&a[t]&&(i=a[t].apply(Ce,n))}),i}function I(t,n,a,o,s){n=i(n,de,ce);var l=e(".dw-li",t).eq(n),d=void 0===s?n:s,c=void 0!==s,r=we,u=o?n==d?.1:Math.abs((n-d)*ke.timeUnit):0;ge.temp[r]=l.attr("data-val"),S(t,r,n,u,c),setTimeout(function(){L(u,r,!0,a,c)},10)}function P(e){var t=De[we]+1;I(e,t>ce?de:t,1,!0)}function j(e){var t=De[we]-1;I(e,de>t?ce:t,2,!0)}function R(e,t,n,i,a){He&&!n&&L(t,void 0,a),F=ke.formatResult(ge.temp),i||(ge.values=ge.temp.slice(0),ge.val=F),e&&Se&&(ve=!0,Te.val(F).change())}function U(e,t){var n;me.on(e,function(e){clearTimeout(n),n=setTimeout(function(){(J&&t||!t)&&ge.position(!t)},200)})}var Y,z,F,_,X,B,E,Q,$,G,J,K,N,Z,ee,te,ne,ie,ae,oe,se,le,de,ce,re,ue,we,he,fe,ve,pe,me,be,ye,xe,ge=this,Ce=d,Te=e(Ce),ke=b({},C),Me={},We={},De={},Ae={},Oe=[],Ve=[],Se=Te.is("input"),He=!1,Le=function(n){!t(n)||s||ee||xe||k(this)||(n.preventDefault(),s=!0,ne="clickpick"!=ke.mode,ue=e(".dw-ul",this),W(ue),ie=void 0!==We[we],le=ie?O(ue):De[we],ae=p(n,"Y"),oe=new Date,se=ae,S(ue,we,le,.001),ne&&ue.closest(".dwwl").addClass("dwa"),e(document).on(x,qe).on(g,Ie))},qe=function(e){ne&&(e.preventDefault(),e.stopPropagation(),se=p(e,"Y"),S(ue,we,i(le+(ae-se)/z,de-1,ce+1))),ae!==se&&(ie=!0)},Ie=function(t){var n,a,o,l=new Date-oe,d=i(le+(ae-se)/z,de-1,ce+1),c=ue.offset().top;if(300>l?(n=(se-ae)/l,a=n*n/ke.speedUnit,0>se-ae&&(a=-a)):a=se-ae,o=Math.round(le-a/z),!a&&!ie){var r=Math.floor((se-c)/z),u=e(e(".dw-li",ue)[r]),w=ne;q("onValueTap",[u])!==!1?o=r:w=!0,w&&(u.addClass("dw-hl"),setTimeout(function(){u.removeClass("dw-hl")},200))}ne&&I(ue,o,0,!0,Math.round(d)),s=!1,ue=null,e(document).off(x,qe).off(g,Ie)},Pe=function(n){xe&&xe.removeClass("dwb-a"),xe=e(this),e(document).on(g,je),xe.hasClass("dwb-d")||xe.hasClass("dwb-nhl")||xe.addClass("dwb-a"),xe.hasClass("dwwb")&&t(n)&&T(n,xe.closest(".dwwl"),xe.hasClass("dwwbp")?P:j)},je=function(t){ee&&(clearInterval(he),ee=!1),xe&&(xe.removeClass("dwb-a"),xe=null),e(document).off(g,je)},Re=function(t){38==t.keyCode?T(t,e(this),j):40==t.keyCode&&T(t,e(this),P)},Ue=function(e){ee&&(clearInterval(he),ee=!1)},Ye=function(t){if(!k(this)){t.preventDefault(),t=t.originalEvent||t;var n=t.wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0,i=e(".dw-ul",this);W(i),I(i,Math.round(De[we]-n),0>n?1:2)}};ge.position=function(t){if(!(!re||pe||E===X.width()&&Q===(me[0].innerHeight||me.innerHeight())&&t||q("onPosition",[_])===!1)){var n,a,o,s,l,d,c,r,u,w,h,f,v,p=0,m=0,b=me.scrollLeft(),y=me.scrollTop(),x=e(".dwwr",_),g=e(".dw",_),C={},T=void 0===ke.anchor?Te:ke.anchor;E=X.width(),Q=me[0].innerHeight||me.innerHeight(),/modal|bubble/.test(ke.display)&&(e(".dwc",_).each(function(){n=e(this).outerWidth(!0),p+=n,m=n>m?n:m}),n=p>E?m:p,x.width(n).css("white-space",p>E?"":"nowrap")),$=g.outerWidth(),G=g.outerHeight(!0),J=Q>=G&&E>=$,ge.scrollLock=J,"modal"==ke.display?(a=(E-$)/2,o=y+(Q-G)/2):"bubble"==ke.display?(v=!0,u=e(".dw-arrw-i",_),d=T.offset(),c=Math.abs(e(ke.context).offset().top-d.top),r=Math.abs(e(ke.context).offset().left-d.left),s=T.outerWidth(),l=T.outerHeight(),a=i(r-(g.outerWidth(!0)-s)/2-b,3,E-$-3),o=c-G,y>o||c>y+Q?(g.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),o=c+l):g.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),w=u.outerWidth(),h=i(r+s/2-(a+($-w)/2)-b,0,w),e(".dw-arr",_).css({left:h})):(C.width="100%","top"==ke.display?o=y:"bottom"==ke.display&&(o=y+Q-G)),C.top=0>o?0:o,C.left=a,g.css(C),X.height(0),f=Math.max(o+G,"body"==ke.context?e(document).height():be.scrollHeight),X.css({height:f,left:b}),v&&(o+G>y+Q||c>y+Q)&&(pe=!0,setTimeout(function(){pe=!1},300),me.scrollTop(Math.min(o+G-Q,f-Q)))}},ge.enable=function(){ke.disabled=!1,Se&&Te.prop("disabled",!1)},ge.disable=function(){ke.disabled=!0,Se&&Te.prop("disabled",!0)},ge.setValue=function(t,n,i,a){ge.temp=e.isArray(t)?t.slice(0):ke.parseValue.call(Ce,t+"",ge),R(n,i,!1,a,n)},ge.getValue=function(){return ge.values},ge.getValues=function(){var e,t=[];for(e in ge._selectedValues)t.push(ge._selectedValues[e]);return t},ge.changeWheel=function(t,n,i){if(_){var a=0,o=t.length;e.each(ke.wheels,function(s,l){return e.each(l,function(s,l){return e.inArray(a,t)>-1&&(Oe[a]=l,e(".dw-ul",_).eq(a).html(M(a)),o--,!o)?(ge.position(),L(n,void 0,i),!1):void a++}),o?void 0:!1})}},ge.isVisible=function(){return He},ge.tap=function(e,t){var i,a;ke.tap&&e.on("touchstart.dw mousedown.dw",function(e){e.preventDefault(),i=p(e,"X"),a=p(e,"Y")}).on("touchend.dw",function(e){Math.abs(p(e,"X")-i)<20&&Math.abs(p(e,"Y")-a)<20&&t.call(this,e),n()}),e.on("click.dw",function(e){l||t.call(this,e),e.preventDefault()})},ge.show=function(t){if(!ke.disabled&&!He){"top"==ke.display&&(K="slidedown"),"bottom"==ke.display&&(K="slideup"),A(),q("onBeforeShow",[]);var i,a=0,o="";K&&!t&&(o="dw-"+K+" dw-in");var s='<div role="dialog" class="'+ke.theme+" dw-"+ke.display+(h?" dw"+h.replace(/\-$/,""):"")+(te?"":" dw-nobtn")+'">'+(re?'<div class="dw-persp"><div class="dwo"></div><div class="dw dwbg '+o+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div>':'<div class="dw dwbg dwi">')+'<div class="dwwr"><div aria-live="assertive" class="dwv'+(ke.headerText?"":" dw-hidden")+'"></div><div class="dwcc">',l=e.isArray(ke.minWidth),d=e.isArray(ke.maxWidth),c=e.isArray(ke.fixedWidth);e.each(ke.wheels,function(t,n){s+='<div class="dwc'+("scroller"!=ke.mode?" dwpm":" dwsc")+(ke.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>',e.each(n,function(e,t){Oe[a]=t,i=void 0!==t.label?t.label:e,s+='<td><div class="dwwl dwrc dwwl'+a+'">'+("scroller"!=ke.mode?'<a href="#" tabindex="-1" class="dwb-e dwwb dwwbp" style="height:'+z+"px;line-height:"+z+'px;"><span>+</span></a><a href="#" tabindex="-1" class="dwb-e dwwb dwwbm" style="height:'+z+"px;line-height:"+z+'px;"><span>&ndash;</span></a>':"")+'<div class="dwl">'+i+'</div><div tabindex="0" aria-live="off" aria-label="'+i+'" role="listbox" class="dwww"><div class="dww" style="height:'+ke.rows*z+"px;"+(ke.fixedWidth?"width:"+(c?ke.fixedWidth[a]:ke.fixedWidth)+"px;":(ke.minWidth?"min-width:"+(l?ke.minWidth[a]:ke.minWidth)+"px;":"min-width:"+ke.width+"px;")+(ke.maxWidth?"max-width:"+(d?ke.maxWidth[a]:ke.maxWidth)+"px;":""))+'"><div class="dw-ul">',s+=M(a),s+='</div><div class="dwwol"></div></div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',a++}),s+="</tr></table></div></div>"}),s+="</div>",re&&te&&(s+='<div class="dwbc">',e.each(ye,function(e,t){t="string"==typeof t?ge.buttons[t]:t,s+="<span"+(ke.btnWidth?' style="width:'+100/ye.length+'%"':"")+' class="dwbw '+t.css+'"><a href="#" class="dwb dwb'+e+' dwb-e" role="button">'+t.text+"</a></span>"}),s+="</div>"),s+=(re?"</div>":"")+"</div></div></div>",_=e(s),X=e(".dw-persp",_),B=e(".dwo",_),L(),q("onMarkupReady",[_]),re?(_.appendTo(ke.context),K&&!t&&(_.addClass("dw-trans"),setTimeout(function(){_.removeClass("dw-trans").find(".dw").removeClass(o)},350))):Te.is("div")?Te.html(_):_.insertAfter(Te),q("onMarkupInserted",[_]),He=!0,re&&(e(window).on("keydown.dw",function(e){13==e.keyCode?ge.select():27==e.keyCode&&ge.cancel()}),ke.scrollLock&&_.on("touchmove",function(e){J&&e.preventDefault()}),e("input,select,button",be).each(function(){this.disabled||(e(this).attr("autocomplete")&&e(this).data("autocomplete",e(this).attr("autocomplete")),e(this).addClass("dwtd").prop("disabled",!0).attr("autocomplete","off"))}),ge.position(),U("orientationchange.dw resize.dw",!1),U("scroll.dw",!0)),_.on("DOMMouseScroll mousewheel",".dwwl",Ye).on("keydown",".dwwl",Re).on("keyup",".dwwl",Ue).on("selectstart mousedown",m).on("click",".dwb-e",m).on("touchend",function(){ke.tap&&n()}).on("keydown",".dwb-e",function(t){32==t.keyCode&&(t.preventDefault(),t.stopPropagation(),e(this).click())}),setTimeout(function(){e.each(ye,function(t,n){ge.tap(e(".dwb"+t,_),function(e){n="string"==typeof n?ge.buttons[n]:n,n.handler.call(this,e,ge)})}),ke.closeOnOverlay&&ge.tap(B,function(){ge.cancel()}),_.on(y,".dwwl",Le).on(y,".dwb-e",Pe)},300),q("onShow",[_,F])}},ge.hide=function(t,n,i){if(He&&(i||q("onClose",[F,n])!==!1)){if(e(".dwtd",be).each(function(){e(this).prop("disabled",!1).removeClass("dwtd"),e(this).data("autocomplete")?e(this).attr("autocomplete",e(this).data("autocomplete")):e(this).removeAttr("autocomplete")}),_){var a=re&&K&&!t;a&&_.addClass("dw-trans").find(".dw").addClass("dw-"+K+" dw-out"),t?_.remove():setTimeout(function(){_.remove(),o&&(c=!0,o.focus())},a?350:1),me.off(".dw")}Ae={},He=!1}},ge.select=function(){ge.hide(!1,"set")!==!1&&(R(!0,0,!0),q("onSelect",[ge.val]))},ge.attachShow=function(e,t){Ve.push(e),"inline"!==ke.display&&e.on((ke.showOnFocus?"focus.dw":"")+(ke.showOnTap?" click.dw":""),function(n){"focus"===n.type&&("focus"!==n.type||c)||l||(t&&t(),o=e,ge.show()),setTimeout(function(){c=!1},300)})},ge.cancel=function(){ge.hide(!1,"cancel")!==!1&&q("onCancel",[ge.val])},ge.init=function(t){N=r.themes[t.theme||ke.theme],Z=r.i18n[t.lang||ke.lang],b(w,t),q("onThemeLoad",[Z,w]),b(ke,N,Z,w),ke.buttons=ke.buttons||["set","cancel"],ke.headerText=void 0===ke.headerText?"inline"!==ke.display?"{value}":!1:ke.headerText,ge.settings=ke,Te.off(".dw");var n=r.presets[ke.preset];n&&(Me=n.call(Ce,ge),b(ke,Me,w)),Y=Math.floor(ke.rows/2),z=ke.height,K=ke.animate,re="inline"!==ke.display,ye=ke.buttons,me=e("body"==ke.context?window:ke.context),be=e(ke.context)[0],ke.setText||ye.splice(e.inArray("set",ye),1),ke.cancelText||ye.splice(e.inArray("cancel",ye),1),ke.button3&&ye.splice(e.inArray("set",ye)+1,0,{text:ke.button3Text,handler:ke.button3}),ge.context=me,ge.live=!re||-1==e.inArray("set",ye),ge.buttons.set={text:ke.setText,css:"dwb-s",handler:ge.select},ge.buttons.cancel={text:ge.live?ke.closeText:ke.cancelText,css:"dwb-c",handler:ge.cancel},ge.buttons.clear={text:ke.clearText,css:"dwb-cl",handler:function(){ge.trigger("onClear",[_]),Te.val(""),ge.live||ge.hide()}},te=ye.length>0,He&&ge.hide(!0,!1,!0),re?(A(),Se&&(void 0===fe&&(fe=Ce.readOnly),Ce.readOnly=!0),ge.attachShow(Te)):ge.show(),Se&&Te.on("change.dw",function(){ve||ge.setValue(Te.val(),!1,.2),ve=!1})},ge.option=function(e,t){var n={};"object"==typeof e?n=e:n[e]=t,ge.init(n)},ge.destroy=function(){ge.hide(!0,!1,!0),e.each(Ve,function(e,t){t.off(".dw")}),e(window).off(".dwa"),Se&&(Ce.readOnly=fe),delete u[Ce.id],q("onDestroy",[])},ge.getInst=function(){return ge},ge.getValidCell=H,ge.trigger=q,u[Ce.id]=ge,ge.values=null,ge.val=null,ge.temp=null,ge.buttons={},ge._selectedValues={},ge.init(w)};var o,s,l,d,c,r=e.mobiscroll,u=r.instances,w=r.util,h=w.prefix,f=w.jsPrefix,v=w.has3d,p=w.getCoord,m=function(e){e.preventDefault()},b=e.extend,y="touchstart mousedown",x="touchmove mousemove",g="touchend mouseup",C={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,closeOnOverlay:!0,showOnFocus:!0,showOnTap:!0,showLabel:!0,wheels:[],theme:"sense-ui",selectedText:" Selected",closeText:"Close",display:"modal",mode:"scroller",preset:"",lang:"zh",setText:"Set",cancelText:"Cancel",clearText:"Clear",context:"body",scrollLock:!0,tap:!0,btnWidth:!0,speedUnit:.0012,timeUnit:.1,formatResult:function(e){return e.join(" ")},parseValue:function(t,n){var i,o=t.split(" "),s=[],l=0;return e.each(n.settings.wheels,function(t,n){e.each(n,function(t,n){n=n.values?n:a(n),i=n.keys||n.values,-1!==e.inArray(o[l],i)?s.push(o[l]):s.push(i[0]),l++})}),s}};e(window).on("focus",function(){o&&(c=!0)}),e(document).on("mouseover mouseup mousedown click",function(e){return l?(e.stopPropagation(),e.preventDefault(),!1):void 0}),e.mobiscroll.setDefaults=function(e){b(C,e)}}(jQuery);